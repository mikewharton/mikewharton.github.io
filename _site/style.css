/* ---------- Local-font stack (common, fallbacks) ---------- */
:root{
  --bg: #ffffff;
  --text: #0b0b0b;
  --muted: rgba(11,11,11,0.65);
  --glass-border: rgba(255,255,255,0.35);
  --glass-shadow: 0 6px 18px rgba(10,10,10,0.06);
  --accent: #0a66c2;
  --max-width: 84ch;

  /* serif heading stack: common transitional & oldstyle serif families likely to exist */
  --serif-heading: "Georgia", "Cambria", "Times New Roman", "Palatino Linotype", "Book Antiqua", "Garamond", serif;

  /* monospace for body as requested */
  --mono-body: ui-monospace, "SFMono-Regular", Menlo, Monaco, "Courier New", monospace;
}

/* Apply stacks */
body{
  font-family: var(--mono-body);
  color: var(--text);
  background: var(--bg);
  margin: 0;
  -webkit-font-smoothing:antialiased;
  -moz-osx-font-smoothing:grayscale;
}

/* Use serif stack for large headings */
.hero-title, .card h2, .card h3, .brand {
  font-family: var(--serif-heading);
  font-weight: 700;
  -webkit-font-smoothing:antialiased;
  -moz-osx-font-smoothing:grayscale;
}

a{color:var(--accent);text-decoration:none}
a:hover{text-decoration:underline}
p{line-height:1.6}
code{font-size:.95em}

main{
  max-width:var(--max-width);
  margin:0 auto;
  padding:5.2rem 1rem 3rem;
  display:flex;
  flex-direction:column;
  align-items:center;
}

/* Header + glass */
#site-header{
  position:fixed;
  inset:0 0 auto 0;
  width:100%;
  z-index:200;
  padding:.65rem 1rem;
  display:flex;
  justify-content:center;
  transition:all 240ms ease;
}
.nav-plain{background:transparent;box-shadow:none;backdrop-filter:none;-webkit-backdrop-filter:none}
.nav-glass{
  background:linear-gradient(180deg, rgba(255,255,255,.62), rgba(255,255,255,.50));
  border-bottom:1px solid var(--glass-border);
  box-shadow:var(--glass-shadow);
  backdrop-filter:blur(10px) saturate(110%);
  -webkit-backdrop-filter:blur(10px) saturate(110%);
}

.nav-inner{
  max-width:var(--max-width);
  width:100%;
  display:flex;
  align-items:center;
  justify-content:space-between;
  position:relative;
}

.brand{
  font-family:"Source Serif 4", serif;
  font-weight:900;
  letter-spacing:.06em;
  color:var(--text);
  font-size:1.25rem;
  text-decoration:none;
}

/* NAV: ensure relative container for absolute dropdown positioning */
.nav-inner { position: relative; align-items: center; }

/* Tidy toggle placement — placed before nav-list in DOM but visually on the far right */
.nav-toggle{
  display:none; /* shown only on small screens */
  background:none;
  border:0;
  padding:0.45rem;
  border-radius:8px;
  color:var(--text);
  cursor:pointer;
  align-self:flex-start;
}

/* Bars */
.nav-toggle .bar{
  display:block;
  width:22px;
  height:2px;
  margin:4px 0;
  background:currentColor;
  transition: transform .28s ease, opacity .28s ease;
}

/* SMALL SCREENS: show toggle, create animated glass dropdown */
@media (max-width: 720px) {
  .nav-toggle { display:inline-flex; order: 3; margin-left: auto; } /* push to right */
  .brand { order: 1; }
  nav { order: 2; }

  /* Dropdown panel: absolutely positioned, animated */
  .nav-list{
    position: absolute;
    top: calc(100% + 8px); /* below header */
    right: 0.5rem;
    min-width: 200px;
    max-width: calc(100vw - 2rem);
    padding: 0.6rem;
    margin: 0;
    list-style: none;
    border-radius: 12px;
    box-shadow: 0 10px 30px rgba(10,10,10,0.12);
    border: 1px solid rgba(0,0,0,0.04);

    /* glass background + blur */
    background: linear-gradient(180deg, rgba(255,255,255,0.62), rgba(255,255,255,0.50));
    backdrop-filter: blur(8px) saturate(110%);
    -webkit-backdrop-filter: blur(8px) saturate(110%);

    /* hidden by default but present in flow for animation */
    visibility: hidden;
    opacity: 0;
    transform: translateY(-8px) scale(.99);
    transform-origin: top right;
    transition: opacity .28s cubic-bezier(.2,.9,.25,1), transform .28s cubic-bezier(.2,.9,.25,1), visibility .01s linear .28s;
    z-index: 999;
  }

  /* Visible state */
  .nav-list.show{
    visibility: visible;
    opacity: 1;
    transform: translateY(0) scale(1);
    transition: opacity .28s cubic-bezier(.2,.9,.25,1), transform .28s cubic-bezier(.2,.9,.25,1), visibility .01s linear 0s;
  }

  .nav-list a{
    display:block;
    padding: 0.6rem 0.85rem;
    color: var(--text);
    border-radius: 8px;
  }
  .nav-list a:hover, .nav-list a:focus{
    background: rgba(0,0,0,0.04);
  }

  /* Ensure the header height accommodates the toggle and brand */
  #site-header { padding: 0.6rem 1rem; }
}

/* Desktop nav: remove bullets and default anchor styling */
.nav-list {
  list-style: none;      /* remove bullets */
  margin: 0;             /* reset default margins */
  padding: 0;            /* reset default padding */
  display: flex;         /* horizontal list */
  gap: 1rem;             /* spacing between items */
  align-items: center;
}

/* Desktop nav links */
.nav-list a {
  color: var(--text);         /* use site text colour (not browser blue) */
  text-decoration: none;
  padding: .25rem .35rem;
  border-radius: 6px;
  display: inline-block;
}

.nav-list a:hover,
.nav-list a:focus {
  text-decoration: underline;
  background: rgba(0,0,0,0.03);
}


/* Typography */
.hero{
  text-align:center;
  margin-bottom:3.25rem; /* increased spacing under strapline */
  padding-top:1rem;
}
.hero-title{
  font-family:"Source Serif 4", serif;
  font-weight:900;
  font-size:clamp(2.1rem, 5vw, 4.1rem);
  margin:0 0 .7rem;
  line-height:1.02;
}
.hero-sub{
  font-size:1.05rem;
  margin:.4rem 0 1.2rem;
  color:var(--muted);
}
.lede{color:var(--muted);margin-top:0}

.stack{width:100%;display:flex;flex-direction:column;gap:1rem}
.grid-2{width:100%;display:grid;grid-template-columns:repeat(auto-fit,minmax(18rem,1fr));gap:1rem}

.card{
  padding:1.15rem;
  border-radius:12px;
  background:linear-gradient(180deg, rgba(255,255,255,.86), rgba(255,255,255,.74));
  box-shadow:0 4px 14px rgba(10,10,10,.04);
  border:1px solid rgba(0,0,0,.03);
}
.card h2,.card h3{margin:0 0 .4rem;font-family:"Source Serif 4", serif;font-weight:900}
.card p{margin:.4rem 0 0}

/* Portrait (optional but common for academic/personal sites) */
.profile{display:flex;gap:1.2rem;align-items:center;justify-content:center;flex-wrap:wrap}
.profile img{
  width:120px;height:120px;border-radius:14px;object-fit:cover;
  box-shadow:0 14px 30px rgba(0,0,0,.08);
  border:1px solid rgba(0,0,0,.05);
}

/* Research image tiles (rounded rect, dark overlay, hover brighten + zoom) */
.research-grid{
  width:100%;
  display:grid;
  grid-template-columns:repeat(auto-fit,minmax(14rem,1fr));
  gap:1rem;
}
.research-card{
  position:relative;
  border-radius:14px;
  overflow:hidden;
  min-height:12rem;
  display:flex;
  align-items:flex-end;
  background:#111;
  color:white;
  cursor:pointer;
  text-decoration:none;
  transition:transform .22s ease;
}
.research-card .img{
  position:absolute;inset:0;
  background-size:cover;background-position:center;
  transform:scale(1);
  transition:transform .45s cubic-bezier(.2,.9,.25,1), filter .35s ease;
  will-change:transform;
  z-index:0;
}
.research-card .overlay{
  position:absolute;inset:0;
  background:linear-gradient(to bottom, rgba(0,0,0,.45), rgba(0,0,0,.55));
  z-index:1;
  transition:background .25s ease;
}
.research-card .meta{
  position:relative;z-index:2;
  padding:1rem;width:100%;
  display:flex;flex-direction:column;gap:.25rem;
}
.research-card h3{
  margin:0;
  font-family:"Source Serif 4", serif;
  font-weight:900;
  font-size:1.18rem;
  text-shadow:0 8px 20px rgba(0,0,0,.45);
}
.research-card .kicker{font-size:.82rem;opacity:.9}
.research-card:hover .img,.research-card:focus-within .img{
  transform:scale(1.08);
  filter:saturate(1.05) brightness(1.07);
}
.research-card:hover .overlay,.research-card:focus-within .overlay{
  background:linear-gradient(to bottom, rgba(0,0,0,.22), rgba(0,0,0,.32));
}
@media (hover:hover) and (pointer:fine){
  .research-card:hover{transform:translateY(-6px)}
}

/* Side projects kept subtle on home */
.side-grid{width:100%;display:grid;grid-template-columns:repeat(auto-fit,minmax(16rem,1fr));gap:1rem}
.side-tile{
  border-radius:14px;
  padding:1rem;
  border:1px solid rgba(0,0,0,.05);
  background:rgba(255,255,255,.6);
}
.side-tile h3{margin:0 0 .35rem;font-family:"Source Serif 4", serif;font-weight:900}
.side-tile p{margin:0;color:var(--muted)}

/* Gallery + lightbox */
.photo-grid{
  width:100%;
  display:grid;
  grid-template-columns:repeat(auto-fill,minmax(160px,1fr));
  gap:8px;
}
.photo-tile{
  position:relative;
  overflow:hidden;
  border-radius:10px;
  aspect-ratio:4/3;
  cursor:zoom-in;
  border:1px solid rgba(0,0,0,.04);
}
.photo-tile img{
  width:100%;height:100%;
  object-fit:cover;display:block;
  transition:transform .45s cubic-bezier(.2,.9,.25,1);
}
.photo-tile:hover img{transform:scale(1.06)}

.lightbox{
  position:fixed;inset:0;
  display:none;
  align-items:center;justify-content:center;
  background:rgba(0,0,0,.75);
  z-index:900;
  padding:2rem;
}
.lightbox.show{display:flex}
.lightbox img{
  max-width:calc(100% - 4rem);
  max-height:calc(100% - 4rem);
  border-radius:8px;
  box-shadow:0 30px 60px rgba(0,0,0,.6);
  background:white;
}
.lightbox .close{
  position:absolute;top:1.25rem;right:1.25rem;
  background:transparent;border:0;color:white;
  font-size:1.25rem;cursor:pointer;
}

/* Footer */
footer{
  width:100%;
  margin-top:3rem;
  padding:2rem 1rem;
  text-align:center;
  color:var(--muted);
}
footer .footer-inner{max-width:var(--max-width);margin:0 auto}

/* hamburger → X animation */
.nav-toggle.open .bar:nth-child(1){
  transform: translateY(6px) rotate(45deg);
}
.nav-toggle.open .bar:nth-child(2){
  opacity: 0;
}
.nav-toggle.open .bar:nth-child(3){
  transform: translateY(-6px) rotate(-45deg);
}
.nav-toggle .bar{
  transition: transform .28s cubic-bezier(.2,.9,.25,1), opacity .22s linear;
}

/* Post & blog list styling */
.post, .post-page {
  max-width: 66ch;
  margin: 0 auto;
  padding: 0.6rem;
}

.post .card, .post-page .card {
  padding: 1.15rem;
  border-radius: 12px;
}

/* make standard markdown paragraphs readable in the card */
.post p, .post-page p {
  margin: 0 0 1rem;
  line-height: 1.6;
  color: var(--text);
}

/* small meta under titles */
.post small, .post-page small {
  color: var(--muted);
  display: block;
  margin-top: .35rem;
}

